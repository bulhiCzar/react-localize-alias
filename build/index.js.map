{"version":3,"sources":["../webpack/universalModuleDefinition","../webpack/bootstrap","../external \"react\"","initLocalization.tsx","useStore.ts","ProviderLocalization.tsx","getTranslate.tsx","Translate.tsx","withLocalization.tsx","index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@bulhi/react-localization\", [\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@bulhi/react-localization\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"@bulhi/react-localization\"] = factory(root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export type Code = string\n\nexport interface Language {\n  code: Code\n  name: string\n}\n\nexport interface onMissingTranslationProps {\n  translationId: string\n  languageCode: Code\n}\n\nexport type onMissingTranslationFunction = (data: onMissingTranslationProps) => void\n\nexport interface Options {\n  defaultLanguage: string\n  onMissingTranslation: onMissingTranslationFunction\n}\n\nexport type Translation = Record<string, string>\n\nexport interface InitLocalization {\n  languages: Language[]\n  translations: Record<Code, Translation>\n  options: Options\n}\n\nexport const translationsMap: Map<Code, Translation> = new Map()\n\nexport const languagesMap: Map<Code, Language> = new Map()\n\nexport interface Config {\n  activeLanguage: string\n  onMissingTranslation?: onMissingTranslationFunction\n}\n\nexport const config: Config = {\n  activeLanguage: '',\n  onMissingTranslation: () => null,\n}\n\nexport const initLocalization = (props: InitLocalization): void => {\n  const {\n    languages,\n    translations,\n    options,\n  } = props\n\n  languages.forEach((language) => {\n    languagesMap.set(language.code, language)\n  })\n\n  Object.entries(translations).forEach(([code, translation]) => {\n    translationsMap.set(code, translation)\n  })\n\n  config.activeLanguage = options.defaultLanguage || languages[0].code\n\n  config.onMissingTranslation = options.onMissingTranslation || (() => null)\n}\n","import React, { Dispatch, ReducerAction } from 'react'\n\nexport const reducer = <T> (state: any, action: Record<string, string>): T => {\n  switch (action.type) {\n    case 'setActiveLanguage':\n      return { ...state, activeLanguage: action.value } as any\n    default:\n      return state\n  }\n}\n\nexport const useStore = <T> (initValue?: T): [T, Dispatch<ReducerAction<typeof reducer>>] => {\n  const store = React.useReducer(reducer, initValue)\n\n  return store as any\n}\n","import React, { Dispatch, ReducerAction, useContext, useEffect } from 'react'\r\n\r\nimport { config } from './initLocalization'\r\nimport { reducer, useStore } from './useStore'\r\n\r\ninterface ContextLocalizationProps {\r\n  config: typeof config\r\n  update: Dispatch<ReducerAction<typeof reducer>>\r\n  setActiveLanguage: (code: string) => void\r\n}\r\n\r\nexport const ContextLocalization = React.createContext<ContextLocalizationProps>({} as any)\r\n\r\nexport const ProviderLocalization: React.FC = ({ children }) => {\r\n  const [state, dispatch] = useStore(config)\r\n\r\n  const setActiveLanguage = (code: string) => {\r\n    dispatch({\r\n      type: 'setActiveLanguage',\r\n      value: code,\r\n    })\r\n  }\r\n\r\n  const stateMemo = React.useMemo(() => (\r\n    { config: state, update: dispatch, setActiveLanguage }\r\n  ), [state])\r\n\r\n  useEffect(() => {\r\n    setActiveLanguage(state.activeLanguage)\r\n  }, [])\r\n\r\n  return (\r\n    <ContextLocalization.Provider value={stateMemo}>\r\n      {children}\r\n    </ContextLocalization.Provider>\r\n  )\r\n}\r\n\r\nexport const useLocalization = () => useContext(ContextLocalization)\r\n","/* eslint-disable react-hooks/rules-of-hooks */\nimport React from 'react'\nimport {\n  translationsMap,\n} from './initLocalization'\nimport {\n  useLocalization,\n} from './ProviderLocalization'\nimport { TranslateProps, Data } from './Translate'\n\nexport type getTranslateData = Omit<TranslateProps, 'id'>\n\nexport const getTranslate = (\n  id: string,\n  props?: getTranslateData,\n): React.DOMElement<React.DOMAttributes<Element>, Element> | string => {\n  const { data } = props || {}\n\n  const { config } = useLocalization()\n\n  const translated = (translationsMap.get(config.activeLanguage) || {})[id]\n\n  const replaceWithData = (text: string, data: Data = {}): string => {\n    return text.replace(/\\$\\{(\\w+)\\}/g, (str: string, key: string) => {\n      const value = data[key] || ''\n      return value.toString()\n    })\n  }\n\n  if (\n    !translated &&\n    typeof config.onMissingTranslation === 'function'\n  ) {\n    config.onMissingTranslation({\n      translationId: id,\n      languageCode: config.activeLanguage,\n    })\n  }\n\n  const isHTML = /<\\/?[a-z][\\s\\S]*>/i.test(translated)\n\n  const result = !translated\n    ? id\n    : data\n      ? replaceWithData(translated, data)\n      : translated\n\n  return isHTML\n    ? React.createElement('span', { dangerouslySetInnerHTML: { __html: result } })\n    : result\n}\n","import React from 'react'\r\n\r\nimport { getTranslate } from './getTranslate'\r\n\r\nexport type Data = Record<string, string | number>\r\n\r\nexport interface TranslateProps {\r\n  id: string\r\n  data?: Data\r\n}\r\n\r\nexport const Translate: React.FC<TranslateProps> = (props) => {\r\n  const {\r\n    id,\r\n    data,\r\n  } = props\r\n\r\n  return (\r\n    <>\r\n      {getTranslate(id, { data })}\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\nimport { ContextLocalization } from './ProviderLocalization'\n\nexport const withLocalization = (Component: React.FC<any>) => {\n  return (props: any) => {\n    return (\n      <ContextLocalization.Consumer>\n        {(value) => (\n          <Component\n            {...props}\n            config={value.config}\n            setActiveLanguage={value.setActiveLanguage}\n          />\n        )}\n      </ContextLocalization.Consumer>\n    )\n  }\n}\n","export * from './Translate'\r\nexport * from './initLocalization'\r\nexport * from './ProviderLocalization'\r\nexport * from './withLocalization'\r\nexport * from './getTranslate'\r\n"],"sourceRoot":""}